function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}();define("coreUtils/components/componentUtils",["lodash"],function(e){"use strict";return{shouldBeRendered:function(n,t){return e.includes(n,t)||"masterPage"===t}}}),define("coreUtils/core/anchorTagsGenerator",["lodash","coreUtilsLib"],function(e,n){"use strict";function t(e){var n=a.document.createDocumentFragment().appendChild(a.document.createElement("div"));n.innerHTML=e;return{container:n,textNodes:o(n)}}function o(e,n){if(n=n||[],function(e){return e.nodeType===a.Node.TEXT_NODE}(e)&&n.push(e),function(e){return e.nodeType===a.Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()}(e))return n;for(e=e.firstChild;e;)o(e,n),e=e.nextSibling;return n}function i(n,t){var o=[],i=n.parentNode,c=n.data,l=s.findAll(c,t);0!==l.length&&(e(l).orderBy("index","desc").forEach(function(n){o.push(a.document.createTextNode(c.slice(n.index+n.key.length))),o.push(function(n){var t=r(n),o=a.document.createElement("a");o.innerHTML=n.key,o.classList.add(t.className),e.forEach(e.omit(t,["className"]),function(e,n){o.setAttribute(n,e)});var i=a.document.createElement("object");return i.appendChild(o),i.setAttribute("height",0),i}(n)),c=c.slice(0,n.index)}),o.push(a.document.createTextNode(c)),e.forEach(o.reverse(),function(e){i.insertBefore(e,n)}),i.removeChild(n))}function r(n){var t={"data-auto-recognition":"true","data-content":n.key,className:"auto-generated-link"};switch(n.pattern){case s.Pattern.PHONE:return e.assign(t,{href:"tel:"+n.value,"data-type":"phone"});case s.Pattern.MAIL:return e.assign(t,{href:"mailto:"+n.value,"data-type":"mail"});case s.Pattern.URL:return e.assign(t,{href:n.value,target:"_blank","data-type":"external"});default:throw"Unknown Pattern: "+n.pattern}}var a=n.fragment,s=n.textPatternRecognizer,c=n.textPatternRecognizer.Pattern;return{generateAnchorsInHtml:function(n,o){if(!e.some(o))return n;var r=t(n);return e.forEach(r.textNodes,e.partial(i,e,o)),r.container.innerHTML},findDataForAnchors:function(n,o){if(!e.some(o))return[];var i=t(n);return e(i.textNodes).map("data").flatMap(e.partial(s.findAll,e,o)).map(r).value()},getIncludedPatterns:function(e,n){var t={};return t[c.PHONE]=n,t[c.MAIL]=!0,t[c.URL]=!0,t}}}),define("coreUtils/core/compsToPackages",["lodash","experiment"],function(e,n){"use strict";function t(t,o){if(n.isOpen("selectiveDialogs",o)){var i=r[t];return i?e.isArray(i)?i:[i]:[]}var a=e.includes(t,"tpapps")?["dialogs"]:[],s=r[t];return s?a.concat(s):a}var o=["wixappsCore","container","textArea","matrixGallery","slideShowGallery","comboBoxInput","dialogs"],i=o.concat(["table","messageView","wixappsClassics","mediaRichText"]),r={"wysiwyg.viewer.components.svgshape.SvgShape":"svgShape","wysiwyg.viewer.components.PopupCloseIconButton":"svgShape","wysiwyg.viewer.components.VectorImage":"svgShape","wysiwyg.viewer.components.AdminLoginButton":"adminLoginButton","wysiwyg.viewer.components.WTwitterFollow":"wTwitterFollow","wysiwyg.viewer.components.WFacebookComment":"facebookComments","wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu":"verticalAnchorsMenu","wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenuItem":"verticalAnchorsMenu","wysiwyg.viewer.components.FacebookShare":"facebookShare","wysiwyg.viewer.components.VKShareButton":"vKShareButton","wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":"youTubeSubscribeButton","wysiwyg.viewer.components.ItunesButton":"itunesButton","wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":"skypeCallButton","wysiwyg.viewer.components.inputs.FileUploader":"fileUploader","wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":"pinItPinWidget","wysiwyg.viewer.components.PopupCloseTextButton":"popupCloseTextButton","wysiwyg.viewer.components.Displayer":"displayer","wysiwyg.viewer.components.MatrixGallery":["matrixGallery","imageZoom"],"wixapps.integration.components.Area":"container","wysiwyg.viewer.components.VerticalRepeater":"container","wysiwyg.viewer.components.WSiteStructure":"container","wysiwyg.viewer.components.SiteRegionContainer":["siteRegionContainer","container"],"mobile.core.components.Container":"container","wysiwyg.viewer.components.Repeater":["container","repeater"],"wysiwyg.viewer.components.inputs.RadioButton":"radioButton","wysiwyg.viewer.components.inputs.RadioGroup":["radioButton","radioGroup"],"wysiwyg.viewer.components.documentmedia.DocumentMedia":"documentMedia","wysiwyg.viewer.components.background.bgMedia":"backgroundCommon","wysiwyg.viewer.components.background.bgImage":"backgroundCommon","wysiwyg.viewer.components.background.html5Video":"backgroundCommon","wysiwyg.viewer.components.background.youtubeVideo":"backgroundCommon","wysiwyg.viewer.components.background.iframeVideo":"backgroundCommon","wysiwyg.viewer.components.background.bgOverlay":"backgroundCommon","wysiwyg.viewer.components.inputs.DatePicker":"datePicker","wysiwyg.viewer.components.Calendar":"datePicker","wysiwyg.viewer.components.Month":"datePicker","wysiwyg.viewer.components.Day":"datePicker","wysiwyg.viewer.components.ContactForm":"contactForm","wysiwyg.viewer.components.DynamicContactForm":"contactForm","wysiwyg.common.components.subscribeform.viewer.SubscribeForm":"subscribeForm","wixapps.integration.components.inputs.TextArea":"textArea","wysiwyg.viewer.components.inputs.TextAreaInput":"textArea","wysiwyg.viewer.components.LoginSocialBar":["loginSocialBar","icon","svgShape"],"wysiwyg.viewer.components.LoginSocialButton":["loginSocialBar","icon","svgShape"],"wysiwyg.viewer.components.Icon":"icon","wysiwyg.viewer.components.GoogleMap":"googleMap","wysiwyg.viewer.components.SoundCloudWidget":"soundCloudWidget","wysiwyg.viewer.components.PayPalButton":"paypalButton","wysiwyg.common.components.imagebutton.viewer.ImageButton":"imageButton","wysiwyg.viewer.components.LinkBar":"linkBar","wysiwyg.viewer.components.LinkBarItem":"linkBar","wysiwyg.viewer.components.inputs.ComboBoxInput":"comboBoxInput","wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":"spotifyPlayer","wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":"spotifyFollow","wysiwyg.viewer.components.TwitterFeed":"twitterFeed","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":"backToTopButton","wysiwyg.viewer.components.svgPrimitive":"svgCommon","wysiwyg.viewer.components.WFacebookLike":"facebookLike","wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox":"facebookLikeBox","wysiwyg.viewer.components.FlickrBadgeWidget":"flickrBadgeWidget","wysiwyg.common.components.rssbutton.viewer.RSSButton":"rssButton","wysiwyg.viewer.components.mobile.TinyMenu":["tinyMenu","loginSocialBar","icon","svgShape"],"wysiwyg.viewer.components.Group":"container","wysiwyg.viewer.components.FormContainer":"container","wysiwyg.viewer.components.WGooglePlusOne":"wGooglePlusOne","wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":"pinterestPinIt","wysiwyg.viewer.components.PinterestFollow":"pinterestFollow","wysiwyg.viewer.components.WTwitterTweet":"wTwitterTweet","wysiwyg.viewer.components.AudioPlayer":["audioPlayer","audioCommon"],"wysiwyg.viewer.components.LoginButton":["loginButton","dialogs"],"wysiwyg.viewer.components.HtmlComponent":"htmlComponent","wysiwyg.viewer.components.MediaPlayer":"mediaPlayer","wysiwyg.viewer.components.MediaOverlayControls":"mediaControls","wysiwyg.viewer.components.MediaControls":"mediaControls","wysiwyg.viewer.components.MediaControlPlay":"mediaControls","wysiwyg.viewer.components.MediaControlFullscreen":"mediaControls","wysiwyg.viewer.components.MediaControlVolume":"mediaControls","wysiwyg.viewer.components.MediaControlProgress":"mediaControls","wysiwyg.viewer.components.MediaControlTime":"mediaControls","wysiwyg.viewer.components.MediaControlStoryboard":"mediaControls","wysiwyg.viewer.components.SlideShowGallery":["slideShowGallery","imageZoom"],"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":["singleAudioPlayer","audioCommon"],"wysiwyg.viewer.components.QuickActionBar":"quickActionBar","wysiwyg.viewer.components.QuickActionBarItem":"quickActionBar","wysiwyg.viewer.components.BoxSlideShowSlide":"boxSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShowSlide":["stripSlideShowSlide","boxSlideShowSlide"],"wysiwyg.viewer.components.PopupContainer":"popupContainer","wysiwyg.viewer.components.StripContainer":"stripContainer","wysiwyg.viewer.components.StripColumnsContainer":"stripColumnsContainer","wysiwyg.common.components.exitmobilemode.viewer.ExitMobileMode":"exitMobileModeButton","tpa.viewer.components.Masonry":"tpaGalleries","tpa.viewer.components.Accordion":"tpaGalleries","tpa.viewer.components.Impress":"tpaGalleries","tpa.viewer.components.Freestyle":"tpaGalleries","tpa.viewer.components.Collage":"tpaGalleries","tpa.viewer.components.Honeycomb":"tpaGalleries","tpa.viewer.components.StripShowcase":"tpaGalleries","tpa.viewer.components.StripSlideshow":"tpaGalleries","tpa.viewer.components.Thumbnails":"tpaGalleries","wysiwyg.viewer.components.tpapps.TPA3DGallery":"tpaGalleries","wysiwyg.viewer.components.tpapps.TPA3DCarousel":"tpaGalleries","wysiwyg.viewer.components.MessageView":"messageView","wysiwyg.viewer.components.FlashComponent":["flashComponent","swfobject"],"wysiwyg.viewer.components.BoxSlideShow":"stripSlideShow","wysiwyg.viewer.components.StripContainerSlideShow":"stripSlideShow","wysiwyg.viewer.components.MobileActionsMenu":"mobileActionsMenu","wysiwyg.components.imageZoom":"imageZoom","wysiwyg.viewer.components.MediaZoom":"imageZoom","wysiwyg.components.ImageZoomDisplayer":"imageZoom","wysiwyg.viewer.components.MobileMediaZoom":"imageZoom","wysiwyg.viewer.components.TouchMediaZoom":"imageZoom","wysiwyg.viewer.components.TouchMediaZoomItem":"imageZoom","wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":"verticalMenu","wysiwyg.common.components.disquscomments.viewer.DisqusComments":"disqusComments","wysiwyg.viewer.components.inputs.Checkbox":"checkbox","wixapps.integration.components.Icon":"wixappsCore","wixapps.integration.components.ImageButton":"wixappsCore","wixapps.integration.components.Toggle":"wixappsCore","wysiwyg.viewer.components.Grid":["gridComponent","ag-grid"],"wysiwyg.viewer.components.Table":"table","wysiwyg.viewer.components.dialogs.NotificationDialog":"dialogs","wysiwyg.viewer.components.dialogs.EnterPasswordDialog":"dialogs","wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog":"dialogs","wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog":"dialogs","wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog":"dialogs","wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog":"dialogs","wysiwyg.viewer.components.inputs.ErasableTextInput":"dialogs","wysiwyg.components.viewer.inputs.InputWithValidation":"dialogs","wysiwyg.viewer.components.SliderGallery":"imageZoom","wysiwyg.viewer.components.LanguageSelector":"languageSelector","wysiwyg.viewer.components.MediaContainer":"mediaContainer","wysiwyg.viewer.components.HoverBox":"mediaContainer","wysiwyg.viewer.components.Column":"mediaContainer","wysiwyg.viewer.components.EbayItemsBySeller":"ebayItemsBySeller","platform.components.AppController":"controller","platform.components.semiNativeComponent":"semiNativeComponent","wysiwyg.viewer.components.MediaRichText":"mediaRichText","wysiwyg.viewer.components.ImageButtonWithText":"wixappsCore","wysiwyg.viewer.components.inputs.ColorOption":"wixappsClassics","ecommerce.integration.components.MobileColorOption":"wixappsClassics","wysiwyg.common.components.NumericStepper":"wixappsClassics","wysiwyg.common.components.inputs.OptionsListInput":"wixappsClassics","wysiwyg.common.components.inputs.SelectOptionsList":"wixappsClassics","wysiwyg.viewer.components.inputs.TextOption":"wixappsClassics","ecommerce.integration.components.MobileTextOption":"wixappsClassics","wixapps.integration.components.AppPartZoom":i,"wixapps.integration.components.AppPart":i,"wixapps.integration.components.AppPart2":o.concat("wixappsBuilder"),"wixui.ToggleSwitch":"toggleSwitch","wixui.Pagination":"pagination"};return{compToPackages:t,prefetchComponents:function(n,o,i){function r(c){var l=c.componentType;if(l){var u=t(l);if(u[0]&&a.push(u),!s&&c.dataQuery&&"wixapps.integration.components.AppPart"===l){var p=e.get(o,"rendererModel.clientSpecMap",{}),w=e.get(n,"data.document_data",{}),m=c.dataQuery;"#"===m[0]&&(m=m.substring(1));var g=p[w[m].appInnerID];"wixapps"===g.type&&"blog"===g.packageName&&(s=!0)}}var d=c.children,y=i?c.mobileComponents:c.components;y&&(d=(d||[]).concat(y)),e.forEach(d,r)}var a=[],s=!1;return r(n.structure),(a=e(a).flatten().uniq().value()).length&&requirejs(a,e.noop),s},all:function(){return e(r).values().flatten().uniq().value()}}}),define("coreUtils/core/linkTypes",[],function(){"use strict";return{PAGE_LINK:"PageLink",EXTERNAL_LINK:"ExternalLink",ANCHOR_LINK:"AnchorLink",LOGIN_TO_WIX_LINK:"LoginToWixLink",EMAIL_LINK:"EmailLink",PHONE_LINK:"PhoneLink",DOCUMENT_LINK:"DocumentLink",SWITCH_MOBILE_VIEW_MODE:"SwitchMobileViewMode",DYNAMIC_PAGE_LINK:"DynamicPageLink"}}),define("coreUtils/core/linkUtils",["lodash","coreUtilsLib","warmupUtils","coreUtils/core/linkTypes"],function(e,n,t,o){"use strict";function i(e){var n="mailto:"+(e.recipient&&e.recipient.trim()||""),t=[];return e.subject&&t.push("subject="+e.subject),e.body&&t.push("body="+e.body),t.length>0&&(n+="?"+t.join("&")),n}function r(t,o){var i=t.docId,r=/\.pdf$/i.test(i),a=o.serviceTopology.staticDocsUrl,s=void 0;return e.includes(i,"ugd/")&&e.includes(a,"/ugd")&&(i=i.substr(i.indexOf("ugd")+4)),s=a+"/"+i,r?!0===t.indexable&&(s+="?index=true"):s+="?"+n.urlUtils.toQueryString({dn:t.name}),s}function a(e){return"tel:"+e.phoneNumber}function s(n,t,o){if(t)switch(t.type){case"PageLink":if(t.pageId){c(n,t.pageId.replace("#",""),n.getSiteData().getAllPageIds(),!1,void 0,e.noop,o)}else o&&o({error:{message:"missing pageId property for PageLink"}});break;case"AnchorLink":!function(n,t,o){if(t.pageId){var i=t.pageId.replace("#","");if(n.getSiteData().getPrimaryPageId()===i||n.getSiteData().MASTER_PAGE_ID===i)n.scrollToAnchor(t.anchorDataId);else{var r=n.getSiteData().getAllPageIds();c(n,i,r,!1,t.anchorDataId,e.noop,o)}}else o&&o({error:{message:"missing pageId property for AnchorLink"}})}(n,t,o);break;case"ExternalLink":break;case"EmailLink":window.location.href=i(t);break;case"PhoneLink":window.location.href=a(t);break;case"DocumentLink":var s=r(t,n.getSiteData());window.open(s,"_self");break;case"DynamicPageLink":!function(e,n,t){var o=u.getUrl(e.getSiteData(),n),i=u.parseUrl(e.getSiteData(),o);t&&(i.anchorData=t);e.navigateToPage(i,!1,!1)}(n,t,t.anchorDataId)}}function c(n,t,o,i,r,a,s){if(e.includes(o,t)){n.getSiteAspect("actionsAspect").registerNavigationComplete(a);var c={pageId:t};i&&(c.transition="none"),r&&(c.anchorData=r),n.navigateToPage(c)}else s&&s({error:{message:'Page id "'+t+'" was not found.'}})}var l,u=t.wixUrlParser,p=(l={},_defineProperty(l,o.PAGE_LINK,["type","pageId"]),_defineProperty(l,o.EXTERNAL_LINK,["type","target","url"]),_defineProperty(l,o.ANCHOR_LINK,["type","anchorName","anchorDataId","pageId"]),_defineProperty(l,o.EMAIL_LINK,["type","recipient","subject"]),_defineProperty(l,o.PHONE_LINK,["type","phoneNumber"]),_defineProperty(l,o.DOCUMENT_LINK,["type","docId","name"]),_defineProperty(l,o.DYNAMIC_PAGE_LINK,["type","routerId","innerRoute","anchorDataId"]),l);return{getEmailLink:i,getDocumentLink:r,getPhoneLink:a,navigateToLink:s,navigateToPage:c,getRelevantLinkDataFromMenuItem:function(n){var t={};return n.link&&(t=e.pick(n.link,p[n.link.type]),e.isObject(t.pageId)&&(t.pageId="#"+t.pageId.id),e.isObject(t.anchorDataId)&&(t.anchorDataId="#"+t.anchorDataId.id)),t}}}),define("coreUtils/core/linkRenderer",["lodash","coreUtilsLib","warmupUtils","coreUtils/core/linkUtils","coreUtils/core/linkTypes"],function(e,n,t,o,i){"use strict";function r(n,t,o){var i=t.pageId;if(!i)return{};var r=o||{pageId:i.id,title:i.pageUriSEO};t.queryParams&&e.assign(r,{queryParams:t.queryParams});var a=u.getUrl(n,r),c={href:a,target:p};return s(n,i.id)&&e.assign(c,{href:g,"data-no-physical-url":a}),c}function a(e,n){return r(e,n)}function s(e,n){var t=e.pagesDataItemsMap[n];return t&&t.isPopup}function c(e){return!!e&&0===e.indexOf("mailto")}var l=t.wixUserApi,u=t.wixUrlParser,p="_self",w="_blank",m="https://users.wix.com/signin?",g="javascript:void()",d={sendEmail:"sendMail",welcomeEmailTemplate:"mailTemplate",userColor:"userColor",loginCompName:"loginCompName",referralInfo:"loginCompName"};return{renderLink:function(t,c,g){if(!t||function(e){return"PageLink"===e.type&&!e.pageId||"AnchorLink"===e.type&&!e.pageId||"AnchorLink"===e.type&&!e.anchorDataId||"DocumentLink"===e.type&&!e.docId||"DynamicPageLink"===e.type&&!e.routerId}(t)||!g)return{};var y=u.utils.getResolvedSiteData(c);switch(t.type){case i.PAGE_LINK:return a(y,t);case i.EXTERNAL_LINK:return function(e,t){var o="/"===t.url?e.publicBaseUrl:t.url;return n.validationUtils.isValidUrl(o)?(o=u.normalizeProtocolForSameSite(e,o),{href:o,target:t.target||w,"data-content":o,"data-type":"external",rel:e.isPremiumDomain?void 0:"nofollow"}):{}}(y,t);case i.ANCHOR_LINK:return function(t,o,i){var c="masterPage"===o.pageId.id,l=e.clone(o),u=e.has(o.anchorDataId,"id")?o.anchorDataId.id:o.anchorDataId,p=e.includes(n.siteConstants.SAME_PAGE_SCROLL_ANCHORS,u)||c,w=i.imageZoom,m=s(t,i.pageId),g=e.has(i,"routerDefinition"),d=void 0;d=p?w||m?r(t,{pageId:t.pagesDataItemsMap[t.primaryPageId]}):r(t,l,i):g?r(t,l,i):a(t,l);return m||(d["data-keep-roots"]=!0),d["data-anchor"]=u,d}(y,t,g);case i.LOGIN_TO_WIX_LINK:return function(t,o){var i=o.postLoginUrl||"",r=o.postSignupUrl||"",a=o.dialog||"showLogin",s="",c=void 0,u=void 0,w=void 0;return e.includes(r,"ifcontext")&&(w=n.urlUtils.parseUrl(r).query,e.forOwn(w,function(e,n){"ifcontext"===n.toLowerCase()&&(s=e.replace("#",""),r=/^[a-zA-Z0-9]+$/.test(s)?r.replace("{ifcontext}",s):r.replace("{ifcontext}","illegalContextValue"))})),l.isSessionValid(t.cookie)?u=i:("createUser"===a&&(a="sign-up"),c={originUrl:t.currentUrl.full,postLogin:i,postSignUp:r,view:a,overrideLocale:t.languageCode},e.forEach(d,function(n,t){var i=o[n];e.isUndefined(i)||""===i||(c[t]=i)}),u=m+n.urlUtils.toQueryString(c)),{href:u,target:p}}(y,t);case i.EMAIL_LINK:return function(e){return{href:o.getEmailLink(e),target:p,"data-content":e.recipient,"data-type":"mail"}}(t);case i.PHONE_LINK:return function(e){return{href:o.getPhoneLink(e),"data-content":e.phoneNumber,"data-type":"phone"}}(t);case i.DOCUMENT_LINK:return function(e,n){return{href:o.getDocumentLink(n,e),target:w,"data-type":"document"}}(y,t);case i.SWITCH_MOBILE_VIEW_MODE:return function(e,n){return{href:e.currentUrl.full,target:"_self","data-mobile":n.dataMobile}}(y,t);case i.DYNAMIC_PAGE_LINK:return function(n,t){if(!t.routerId)return{};var o={routerId:t.routerId,innerRoute:t.innerRoute};t.queryParams&&e.assign(o,{queryParams:t.queryParams});var i={href:u.getUrl(n,o),target:p};return t.anchorDataId&&(i["data-anchor"]=t.anchorDataId),i}(y,t);case"FormSubmitButtonLink":return{parentConstType:"button"};default:return{}}},renderImageZoomLink:function(n,t,o,i,r,a){var c=e.defaults({pageItemId:o.id,title:o.title,imageZoom:!0},t),l=u.utils.getResolvedSiteData(n),w=u.getUrl(l,c),m={href:w,target:p};s(l,c.pageId)&&(m.href=g,m["data-no-physical-url"]=w);var d=function(e,n,t){var o=[];return e&&o.push("galleryId:"+e),n&&o.push("propertyQuery:"+n),t&&o.push("galleryCompId:"+t),o.join(" ")}(i,r,a);return d&&(m["data-page-item-context"]=d),m},renderPageLink:function(e,n){return a(u.utils.getResolvedSiteData(n),{pageId:e})},isExternalLink:function(e,n){if(!n)return!1;var t=u.utils.getResolvedSiteData(e),o=!!u.parseUrl(t,n),i=0===n.indexOf(t.serviceTopology.staticDocsUrl),r=n===g;return!(o||c(n)||i||r)},isRelativeUrl:function(e){return!!e&&"/"===e.charAt(0)},isEmailLink:c,getLinkUrlFromLinkProps:function(e){return e.href===g?e["data-no-physical-url"]:e.href},CONSTS:{LOGIN_TO_WIX_URL:m}}}),define("coreUtils/core/menuUtils",["lodash","coreUtils/core/linkRenderer","warmupUtils"],function(e,n,t){"use strict";function o(n,t){if(n.link&&"PageLink"===n.link.type){var i=e.get(n,"link.pageId.id");return i&&i===t.pageId||e.some(n.items,function(e){return o(e,t)})}return!!(n.link&&"DynamicPageLink"===n.link.type&&n.link.innerRoute&&t.innerRoute)&&(e.includes(t.innerRoute.split("/"),n.link.innerRoute.split("/")[1])||n.link.innerRoute===t.innerRoute)}function i(r,a,s,c,l,u){u=u||s&&t.wixUrlParser.utils.getResolvedSiteData(a);var p=!!e.isFunction(a.isMobileView)&&a.isMobileView(),w=e.isFunction(a.getRootNavigationInfo)?a.getRootNavigationInfo():c;return e.reduce(r,function(r,m){var g=p?m.isVisibleMobile:m.isVisible;if(l||g){var d=e.assign(e.clone(m),{items:i(m.items,a,s,c,l,u),link:function(o,i,r,a,s){if(!o)return o;if(e.isString(o))return{};var c=t.objectUtils.cloneDeep(o);return r&&(c.render=n.renderLink(c,s||i,a)),c}(m.link,a,s,c,u),isSelected:o(m,w)});r.push(d)}return r},[])}function r(o,i,a,s,c,l){var u=void 0;c=c||a&&t.wixUrlParser.utils.getResolvedSiteData(i);var p=!!e.isFunction(i.isMobileView)&&i.isMobileView();return e.reduce(o,function(e,t){u=i.getDataByQuery(t.refId)||{};var o=p&&t.isVisibleMobile;if(l||t.isVisible||o){var w={label:u.title,isVisible:!u.hidePage,isVisibleMobile:void 0!==u.mobileHidePage?!u.mobileHidePage:!u.hidePage,items:r(t.items,i,a,s,c,l),link:function(e,t,o,i,r){var a={type:"PageLink",pageId:e};return o&&(a.render=n.renderLink(a,r||t,i)),a}(t.refId,i,a,s,c)};t.displayCount&&(w.displayCount=t.displayCount),e.push(w)}return e},[])}function a(n,t,o,a){var s=n.getDataByQuery("CUSTOM_MAIN_MENU"),c=n.getDataByQuery("MAIN_MENU");return!s||c&&!e.isEmpty(c.items)?r(c.items,n,!t,o,null,a):i(s.items,n,!t,o,a)}return{getDropDownWidthIfOk:function(n,t,o,i,r,a,s,c){if(n-=r*(s?i.length:i.length-1),n-=c.left+c.right,t&&e.fill(i,a),e.includes(i,0))return null;var l=0,u=e.reduce(i,function(e,n){return e+n},0);if(u>n)return null;if(t){if(o){var p=Math.floor(n/i.length),w=e.times(i.length,e.constant(p));if((l=p*i.length)<n){var m=Math.floor(n-l);e.forEach(i,function(e,n){n<=m-1&&w[n]++})}return w}return i}if(o){var g=Math.floor((n-u)/i.length);l=0;var d=e.map(i,function(e){return l+=e+g,e+g});if(l<n){var y=Math.floor(n-l);e.forEach(i,function(e,n){n<=y-1&&d[n]++})}return d}return i},getMaxWidth:function(n){return e.reduce(n,function(e,n){return e>n?e:n},-1/0)},getMinWidth:function(n){return e.reduce(n,function(e,n){return e<n?e:n})},removeAllElementsWithWidthZero:function(n){return e.filter(n,function(e){return 0!==e})},getSiteMenuWithRender:function(e,n,t){return a(e,!1,n,t)},getMenuById:function(n,t,o,r,s){return"CUSTOM_MAIN_MENU"===n||"MAIN_MENU"===n?a(t,o,r):i(e.get(t.getDataByQuery(n),"items",[]),t,!o,r,s)},getMenuItems:i,getSiteMenuWithoutRenderedLinks:function(e,n){return a(e,!0,{},n)},getActiveAnchorInPage:function(n,t,o){if(!n)return null;var i=n.activeAnchorComp.id,r=e(t).filter(function(n){return n.link&&e.isObject(n.link.anchorDataId)&&"AnchorLink"===n.link.type&&e.has(n.link.pageId,"id")&&n.link.pageId.id===o}).find({link:{anchorDataId:{id:i}}});return r?r.link.anchorDataId.id:null},shouldHighlightAnchorInPage:function(e){return e.browserFlags().highlightAnchorsInMenu}}}),define("coreUtils/core/translationsLoader",["lodash","warmupUtils","coreUtilsLib"],function(e,n,t){"use strict";function o(n){return e.includes(r,n)?n:"en"}function i(e,n,t){if(!e.isLoaded(n,t))throw new Error("Translation not loaded for "+n)}var r=n.languages,a=n.ajaxLibrary,s=t.urlUtils,c=function(){function n(e){var t=e.translations,o=e.oldTranslations;_classCallCheck(this,n),this.translations=t,this.oldTranslations=o}return _createClass(n,[{key:"getRequests",value:function(n,t){var o=this,i=e.reject([].concat(t),function(e){return o.isLoaded(e)});if(e.isEmpty(i))return[];return[{customDownload:function(){var e=this;!function(e){o.load(n,t,e)}(function(){return e.done()})}}]}},{key:"load",value:function(n,t,o){var i=this,r=n.serviceTopology.scriptsLocationMap["santa-langs"],c=e.reject([].concat(t),function(e){return i.isLoaded(e)});return Promise.all(e.map(c,function(n){return function(n,t,o){var i=s.joinURL(t,"resources/santa-viewer/bundles/_generated/santa_viewer_"+o+".json");return new Promise(function(e,n){return a.ajax({type:"GET",url:i,success:e,error:n})}).then(function(t){e.isString(t)&&(t=JSON.parse(t)),e.assign(n.translations,_defineProperty({},o,t))})}(i,r,n)})).then(o)}},{key:"isLoaded",value:function(n,t){return e.has(this.resolveTranslations(t),n)}},{key:"resolveTranslations",value:function(n){return this.useOldTranslations||e.has(n,"useOldTranslations")||e.isEmpty(this.translations)?this.oldTranslations:this.translations}},{key:"getTranslation",value:function(n,t,r,a){i(this,t=o(t));var s=this.resolveTranslations();return e.has(s,[t,n,r])?e.get(s,[t,n,r]):e.has(s,["en",n,r])?e.get(s,["en",n,r]):a}},{key:"getTranslationAllKeys",value:function(n,t,r,a){return t=o(t),i(this,t,a),e.get(this.resolveTranslations(a),[t,n],r)}},{key:"overrideTranslations",value:function(e){var n=e.translations,t=e.oldTranslations;this.translations=n,this.oldTranslations=t}},{key:"setToUseOldTranslations",value:function(){this.useOldTranslations=!0}}]),n}(),l=new c({translations:{},oldTranslations:{}});return e.assign(l,{TranslationsLoaderFactory:c})}),define("coreUtils",["lodash","warmupUtils","coreUtils/components/componentUtils","coreUtils/core/anchorTagsGenerator","coreUtils/core/compsToPackages","coreUtils/core/linkRenderer","coreUtils/core/linkTypes","coreUtils/core/linkUtils","coreUtils/core/menuUtils","coreUtils/core/translationsLoader"],function(e,n,t,o,i,r,a,s,c,l){"use strict";return e.assign({allPackages:i.all,componentUtils:t,anchorTagsGenerator:o,compToPackages:i.compToPackages,linkRenderer:r,linkTypes:a,linkUtils:s,menuUtils:c,prefetchComponents:i.prefetchComponents,translationsLoader:l},n)});
//# sourceMappingURL=coreUtils.min.js.map